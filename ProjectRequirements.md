# MailBot - Project Requirements & Technical Documentation

## üìã Executive Summary

**MailBot** is a Chrome extension that revolutionizes email composition in Gmail by leveraging Google's Gemini Nano AI model to generate contextually-aware, personalized email responses directly in the browser‚Äîfully on-device, with no data leaving the user's machine.

**Version**: 0.2.0  
**Status**: Production-Ready with Enhanced Signature Support  
**License**: MIT  
**Repository**: https://github.com/vibecodersph/Mail-Bot

---

## üéØ Project Purpose

### Problem Statement
Email composition is time-consuming and often requires careful consideration of tone, context, and professional etiquette. Users frequently struggle with:
- Crafting appropriate responses to complex email threads
- Maintaining consistent tone across communications
- Following up on unanswered emails without being pushy
- Personalizing emails while staying efficient
- Addressing recipients correctly in multi-party conversations

### Solution
MailBot provides an intelligent AI assistant that:
- ‚úÖ Analyzes entire email threads for context
- ‚úÖ Generates personalized responses based on user intent
- ‚úÖ Maintains proper sender/recipient identity (critical for avoiding confusion)
- ‚úÖ Adapts tone and length to user preferences
- ‚úÖ Uses preferred greetings and closings
- ‚úÖ **Automatically adds professional email signatures with title and contact info**
- ‚úÖ **Intelligently removes duplicate names to prevent signature conflicts**
- ‚úÖ Operates entirely offline with on-device AI (privacy-first)
- ‚úÖ Provides preview-before-send workflow for user control

---

## üèóÔ∏è Technical Architecture

### Tech Stack

#### **Frontend**
- **Languages**: JavaScript (ES6+), HTML5, CSS3
- **Framework**: Vanilla JavaScript (no external dependencies)
- **Extension Platform**: Chrome Extension Manifest V3
- **UI Design**: Dark, minimalist, pill-shaped interface

#### **AI Integration**
- **AI Model**: Google Gemini Nano (Chrome's Built-in AI)
- **API**: Chrome's Prompt API (`window.ai.languageModel`)
- **Processing**: Fully on-device, zero cloud dependency
- **Model Requirements**: Chrome Dev/Canary 127+, ~22GB disk space

#### **Browser APIs Used**
- `chrome.storage.local` - User preferences persistence
- `chrome.runtime` - Extension lifecycle management
- `chrome.scripting` - Dynamic content script injection
- Content Scripts - Gmail DOM manipulation
- MutationObserver - Dynamic email compose box detection

#### **Development Tools**
- Git - Version control
- GitHub - Repository hosting
- VS Code - Primary development environment

---

## üé® User Interface Design

### Design Philosophy
**Dark, Sleek, Minimalist** - Inspired by modern SaaS tools with emphasis on:
- High contrast (solid black backgrounds, white text)
- Rounded pill shapes (16-20px border radius)
- Subtle shadows for depth (`0 4px 12px rgba(0,0,0,0.3)`)
- Smooth fade transitions (200ms)
- 80% opacity text for elegant hierarchy

### UI Components

#### 1. **Collapsed Pill Button**
- **Appearance**: Compact black pill with "MAILBOT" text
- **Location**: Floats above Gmail compose field
- **Interaction**: Click to expand, drag to reposition
- **Styling**:
  ```
  Background: #000000 (solid black)
  Text: rgba(255,255,255,0.8) (dimmed white)
  Border Radius: 16px
  Shadow: 0 4px 12px rgba(0,0,0,0.3)
  Font Size: 16px
  ```

#### 2. **Expanded Panel**
- **Layout**: Horizontal bar with label, input, and action buttons
- **Elements**:
  - Label: "What do you want to say?" (80% opacity)
  - Input field: Dark pill-shaped text box
  - Generate button: White pill with black text
  - Insert button: White pill with black text
  - Collapse button: Circular chevron icon
- **Draggable**: Can be repositioned anywhere on screen
- **Persistent Position**: Maintains position while typing

#### 3. **Preview Container**
- **Position**: Appears 8px below expanded panel
- **Purpose**: Shows generated email for review/editing
- **Features**:
  - Editable content (contenteditable)
  - Regenerate button for new attempts
  - Follows expanded panel when dragged
- **Fade-in Animation**: 200ms opacity transition

#### 4. **Settings Popup**
- **Design**: Matches on-page UI aesthetic
- **Background**: Solid black (#111111)
- **Sections**:
  - Personal Information (Full Name, Title, Contact Number)
  - Email Preferences (Tone, Length)
  - Common Phrases (Greetings, Closings)
- **Input Fields**: Rounded pills (20px radius) with dark theme styling
  - Background: #2a2a2a
  - Text: #fff (white)
  - Placeholder: rgba(255,255,255,0.6)
  - Border: 1.5px transparent (hover: #444444, focus: #666666)
- **Save Button**: High-contrast white pill

---

## ‚öôÔ∏è Core Features & Functionality

### 1. **Intelligent Context Analysis**
```javascript
Features:
- Extracts entire email thread with sender/recipient metadata
- Analyzes conversation state (new message, reply, follow-up)
- Identifies last sender and determines appropriate recipient
- Detects user's email from Gmail profile (4 fallback methods)
- Extracts display names from Gmail UI (not just email addresses)
```

**Conversation States Detected**:
- Conversation Starter (new email)
- Response (replying to someone)
- Follow-up (user sent last message, no response yet)
- Waiting for Response

### 2. **AI-Powered Generation**
```javascript
Process:
1. User enters intent ("Thank them for the update...")
2. System builds comprehensive prompt with:
   - Identity declaration (YOU vs THEM)
   - Conversation history
   - User preferences (tone, length, greetings, closings)
   - Situation analysis
3. Gemini Nano generates response
4. Validation system checks for identity confusion
5. Post-processing fixes signatures if needed
6. Preview shown for user review
```

**Prompt Engineering Highlights**:
- Explicit sender/recipient identity declaration
- First-person perspective enforcement
- Signature validation (prevents signing with recipient's name)
- Contextual tone adaptation
- Length control (short/average/long)
- Custom greeting/closing integration

### 3. **Identity Confusion Prevention** ‚≠ê
**Critical Innovation**: Prevents AI from confusing sender and recipient

```javascript
Validation Checks:
‚úÖ Ensures AI doesn't address the user (sender) in the email
‚úÖ Prevents third-person references to sender
‚úÖ Validates signature uses sender's name, not recipient's
‚úÖ Confirms first-person perspective ("I", "my", "me")
‚úÖ Checks for placeholder text removal

Retry Logic:
- Attempt 1: Standard prompt
- Attempt 2: Enhanced prompt with explicit warnings (if validation fails)
```

### 4. **Name Normalization**
Handles concatenated multi-word names:
```javascript
Examples:
"JosephMaria" ‚Üí "Joseph Maria"
"MariaJose" ‚Üí "Maria Jose"
"PeterBenjaminParker" ‚Üí "Peter Benjamin Parker"
```

### User Preferences System**
**Storage**: `chrome.storage.local` (persistent)

**Settings**:
- **Full Name**: Used for email signatures
- **Job Title**: Professional title shown in signature (optional)
- **Contact Number**: Phone number for signature (optional, validated format)
- **Default Tone**: Neutral, Friendly, Formal, Concise
- **Email Length**: Short (2-3 sentences), Average (4-6), Long (7-10)
- **Preferred Greetings**: Up to 3 custom greetings (comma-separated)
- **Preferred Closings**: Up to 3 custom closings (comma-separated)

### 6. **Preview-Before-Send Workflow**
```
User Flow:
1. Click MailBot ‚Üí Expand panel
2. Enter intent ‚Üí Click "Generate"
3. AI generates ‚Üí Preview appears below
4. **Signature automatically added with title and contact info**
5. User reviews/edits preview (contenteditable)
6. Click "Insert" ‚Üí Email inserted into Gmail compose field
7. User reviews again in Gmail ‚Üí Sends manually
```

**Safety Net**: Two review steps prevent accidental sends
**Signature Intelligence**: Automatically detects and removes duplicate names from AI-generated closings

### 7. **Drag & Reposition**
- Collapsed button is draggable
- Expanded panel is draggable (from label or background)
- Preview follows expanded panel during drag
- Position persists until collapse/re-expand
- `userHasManuallyPositioned` flag prevents auto-repositioning

### 8. **Smooth Animations**
- **Fade In/Out**: 200ms opacity transitions
- **Expand/Collapse**: Seamless state changes
- **Preview Appearance**: Smooth fade-in after generation
- **Hover Effects**: Scale transforms on buttons (1.02x)

### 9. **Professional Email Signatures** ‚≠ê NEW
```javascript
Features:
- Automatic signature appending to all generated emails
- Multi-field support: Full Name, Job Title, Contact Number
- Smart duplicate detection: Removes AI-generated name instances
- Handles both inline (Regards, Name) and standalone formats
- Processes multiple duplicate instances in closing area
- Clean signature format: Name\nTitle\nContact Number
```

**Signature Logic**:
1. User configures name, title, and contact in settings
2. AI generates email with closing (may include user's name)
3. System detects all name instances in last 5 lines
4. Removes duplicate names (inline or standalone)
5. Appends complete signature block once at end
6. Result: Professional signature without duplication

---

## üîí Privacy & Security

### Privacy-First Design
- ‚úÖ **100% On-Device Processing**: No data sent to external servers
- ‚úÖ **No Network Requests**: AI runs locally via Gemini Nano
- ‚úÖ **No Data Collection**: Extension doesn't track or store user emails
- ‚úÖ **Minimal Permissions**: Only `activeTab`, `storage`, `scripting`
- ‚úÖ **Gmail-Only Access**: Restricted to `mail.google.com`

### Data Handling
```javascript
What Gets Stored:
- User preferences (name, tone, greetings, closings)
- Stored in: chrome.storage.local (local to browser)

What NEVER Leaves Device:
- Email content
- Email threads
- Generated drafts
- Conversation context
```

---

## üìÇ Project Structure

```
Mail-Bot/
‚îú‚îÄ‚îÄ manifest.json              # Extension configuration (Manifest V3)
‚îú‚îÄ‚îÄ README.md                  # User-facing documentation
‚îú‚îÄ‚îÄ LICENSE                    # MIT License
‚îú‚îÄ‚îÄ changes.md                 # Development changelog
‚îú‚îÄ‚îÄ ProjectRequirements.md     # This document
‚îÇ
‚îú‚îÄ‚îÄ assets/                    # Extension icons
‚îÇ   ‚îú‚îÄ‚îÄ icon16.png            # 16x16 toolbar icon
‚îÇ   ‚îú‚îÄ‚îÄ icon48.png            # 48x48 extension page icon
‚îÇ   ‚îî‚îÄ‚îÄ icon128.png           # 128x128 Chrome Web Store icon
‚îÇ
‚îú‚îÄ‚îÄ background/
‚îÇ   ‚îî‚îÄ‚îÄ service_worker.js     # Background service worker
‚îÇ
‚îú‚îÄ‚îÄ content/
‚îÇ   ‚îî‚îÄ‚îÄ content.js            # Main content script (1,800+ lines)
‚îÇ       ‚îú‚îÄ‚îÄ User detection (email, display name)
‚îÇ       ‚îú‚îÄ‚îÄ Thread context extraction
‚îÇ       ‚îú‚îÄ‚îÄ Conversation state analysis
‚îÇ       ‚îú‚îÄ‚îÄ AI generation & validation
‚îÇ       ‚îú‚îÄ‚îÄ UI injection & styling
‚îÇ       ‚îú‚îÄ‚îÄ Drag & drop logic
‚îÇ       ‚îî‚îÄ‚îÄ Preview system
‚îÇ
‚îú‚îÄ‚îÄ popup/                     # Settings interface
‚îÇ   ‚îú‚îÄ‚îÄ popup.html            # Settings form structure
‚îÇ   ‚îú‚îÄ‚îÄ popup.css             # Dark minimalist styling
‚îÇ   ‚îî‚îÄ‚îÄ popup.js              # Settings persistence logic
‚îÇ
‚îî‚îÄ‚îÄ options/                   # Options page (legacy)
    ‚îú‚îÄ‚îÄ options.html
    ‚îú‚îÄ‚îÄ options.css
    ‚îî‚îÄ‚îÄ options.js
```

---

## üöÄ Installation & Setup

### Prerequisites
```
Browser: Chrome Dev/Canary 127+ or Chrome 128+
Disk Space: ~22GB (for Gemini Nano model)
OS: Windows, macOS, Linux
```

### Chrome Flags Configuration
```
Required Flags (chrome://flags):
1. "Prompt API for Gemini Nano" ‚Üí Enabled
2. "Enables optimization guide on device" ‚Üí Enabled BypassPerfRequirement

Model Download (chrome://components):
- Find "Optimization Guide On Device Model"
- Click "Check for update"
- Wait for download (component should show version number)
```

### Extension Installation
```bash
1. Clone repository:
   git clone https://github.com/gerdguerrero/Mail-Bot.git

2. Open Chrome ‚Üí chrome://extensions/

3. Enable "Developer mode" (top-right toggle)

4. Click "Load unpacked"

5. Select Mail-Bot folder

6. Extension appears with MailBot icon
```

### Initial Configuration
```
1. Click MailBot icon in toolbar
2. Enter full name (e.g., "Peter Benjamin Parker")
3. (Optional) Enter job title (e.g., "Senior Software Engineer")
4. (Optional) Enter contact number (e.g., "+1 (555) 123-4567")
5. Set default tone (Neutral, Friendly, Formal, Concise)
6. Set email length (Short, Average, Long)
7. (Optional) Add custom greetings/closings
8. Click "Save Settings"
```

---

## üéì User Guide

### Basic Usage

#### **Composing a New Email**
```
1. Open Gmail ‚Üí Click "Compose"
2. MailBot button appears above compose field
3. Click button ‚Üí Panel expands
4. Enter intent: "Introduce myself and ask about internship opportunities"
5. Click "Generate" ‚Üí Wait for AI
6. Review preview ‚Üí Edit if needed
7. Click "Insert" ‚Üí Email appears in Gmail
8. Review again ‚Üí Send
```

#### **Replying to an Email**
```
1. Open email thread ‚Üí Click "Reply"
2. MailBot button appears
3. Click ‚Üí Expand panel
4. Enter intent: "Thank them and answer their questions about the project"
5. Generate ‚Üí Review ‚Üí Insert ‚Üí Send
```

#### **Following Up**
```
1. Open sent email (no response yet)
2. Click "Forward" or "Reply All"
3. MailBot detects this is a follow-up
4. Enter intent: "Politely check if they had a chance to review"
5. AI generates appropriate follow-up tone
```

### Advanced Features

#### **Custom Positioning**
- Drag collapsed button to preferred location
- Position persists while typing
- Resets when collapsed/re-expanded

#### **Preview Editing**
- Click inside preview box to edit generated text
- Changes are preserved when clicking "Insert"
- Useful for quick tweaks without regenerating

#### **Regeneration**
- Click "Regenerate" button in preview header
- Generates new version with same intent
- Useful if first attempt isn't quite right

#### **Visual Feedback**
- Red border on input if empty when clicking Generate
- Red border on input if clicking Insert before generating
- Loading state during AI generation
- Fade animations for smooth transitions

---

## üõ†Ô∏è Technical Implementation Details

### Key Algorithms

#### 1. **User Email Detection**
```javascript
Priority Order:
1. Gmail profile button (gb_d element)
   - Most reliable, always current user
2. Account switcher links (gb_za)
   - Backup for multi-account users
3. Account dropdown (aria-label with "Google Account")
   - Works in most Gmail views
4. Fallback alert if none found
```

#### 2. **Display Name Extraction**
```javascript
Methods:
1. Profile button aria-label parsing
2. Gmail settings elements (gb_yb, gb_Ib)
3. Account menu data attributes
4. Compose "From" field parsing
5. Fallback: Capitalize email username

Normalization:
- Splits concatenated names (MariaJose ‚Üí Maria Jose)
- Preserves single-word names
- Handles acronyms (JOHNSmith ‚Üí JOHN Smith)
```

#### 3. **Recipient Detection**
```javascript
Logic:
- If last sender was user ‚Üí Reply to last recipient (user.to)
- If last sender was other ‚Üí Reply to that sender (other.from)
- Extracts display names from Gmail UI (not just emails)
- Normalizes recipient names same as user names
```

#### 4. **Conversation State Analysis**
```javascript
States:
- conversationStarter: Thread length = 1 AND user sent it
- isFollowUp: User sent last 2 messages consecutively
- respondingTo: Other party sent last message
- waitingForResponse: User sent last, no reply yet

Uses:
- Influences prompt construction
- Determines appropriate tone
- Affects AI's approach to generation
```

#### 5. **Validation System**
```javascript
Checks (in order):
1. AI addressing user instead of recipient
2. AI using third-person for user (should be "I")
3. First-person perspective present
4. Intent keyword matching
5. Placeholder text removal
6. Signature correctness (not recipient's name)
7. Subject line in body (shouldn't be there)

Actions:
- Warnings: Logged, user informed
- Errors: Retry with enhanced prompt OR user confirmation
```

#### 6. **Drag & Drop Logic**
```javascript
States Tracked:
- isDragging: Boolean for active drag
- customPosition: {x, y} for dragged location
- dragOffset: {x, y} for grab point
- userHasManuallyPositioned: Flag to prevent auto-reposition

Events:
- onMouseDown: Start drag, calculate offset
- onMouseMove: Update position, reposition preview
- onMouseUp: End drag, detect click vs drag (< 5px = click)

Position Retention:
- Persists during typing/scrolling
- Resets on collapse/expand cycle
```

#### 7. **Email Signature Management** ‚≠ê NEW
```javascript
Signature Detection & Cleanup:
1. Scans last 5 lines of AI-generated email
2. Identifies user name in closing area (case-insensitive)
3. Detects inline format: "Regards, Joseph Miguel Guerrero"
4. Detects standalone format: Name on separate line
5. Removes ALL duplicate instances (handles multiple closings)
6. Appends clean signature block once

Regex Escaping:
- Escapes special characters in user name for safe regex matching
- Handles names with spaces, hyphens, apostrophes

Format Enforcement:
- AI prompt instructs: "Put closing on its own line, then name on next line"
- Example format enforced:
  Regards,
  Joseph Miguel Guerrero
  
  NOT: Regards, Joseph Miguel Guerrero
```

### Performance Optimizations

```javascript
1. MutationObserver throttling:
   - Only scans for new compose boxes
   - Disconnects when not needed

2. requestAnimationFrame for positioning:
   - Smooth 60fps updates
   - Batches layout calculations

3. Debounced scroll/resize handlers:
   - Only repositions when necessary
   - Skips if custom positioned

4. Lazy AI session creation:
   - Only creates session when generating
   - Destroys after use to free memory

5. Content length limits:
   - Email thread content capped at 1000 chars per message
   - Prevents prompt overflow
```

---

## üß™ Testing & Quality Assurance

### Test Scenarios

#### **Identity Confusion Prevention** ‚≠ê
```
Test Cases:
‚úÖ Replying to Kriza Patriz Mutia (ksmutia@up.edu.ph)
‚úÖ Email should NOT say "Dear Joseph" (that's the user)
‚úÖ Email SHOULD say "Hi Kriza" or general greeting
‚úÖ Signature SHOULD be "Joseph Miguel Guerrero" (user)
‚úÖ Signature SHOULD NOT be "Kriza Patriz Mutia" (recipient)

Validation:
- Multiple regenerations should maintain correct identity
- Follow-ups should preserve sender identity
- Multi-party emails should address correct recipient
```

#### **Name Normalization**
```
Test Cases:
Input: "MariaJose Rodriguez"
Expected: "Maria Jose Rodriguez"

Input: "JosephMaria"
Expected: "Joseph Maria"

Input: "PeterParker"
Expected: "Peter Parker"

Single names preserved:
Input: "Joseph"
Expected: "Joseph"
```

#### **Drag & Reposition**
```
Test Cases:
‚úÖ Drag collapsed button ‚Üí Stays in place
‚úÖ Expand panel ‚Üí Panel appears at button location
‚úÖ Drag expanded panel ‚Üí Stays while typing
‚úÖ Type long text (wrapping) ‚Üí Panel doesn't snap back
‚úÖ Preview follows panel during drag
‚úÖ Collapse/expand ‚Üí Position resets
```

#### **Preview Workflow**
```
Test Cases:
‚úÖ Generate ‚Üí Preview appears below panel
‚úÖ Preview is editable (contenteditable)
‚úÖ Edits persist when clicking Insert
‚úÖ Regenerate creates new version
‚úÖ Insert without generate ‚Üí Red border + error message
‚úÖ Preview fades in smoothly (200ms)
```

#### **Settings Persistence**
```
Test Cases:
‚úÖ Save settings ‚Üí Reload extension ‚Üí Settings retained
‚úÖ Change name ‚Üí Generate email ‚Üí New name in signature
‚úÖ **Add title ‚Üí Generate ‚Üí Title appears in signature below name**
‚úÖ **Add contact ‚Üí Generate ‚Üí Contact appears in signature below title**
‚úÖ **Empty optional fields ‚Üí Generate ‚Üí Signature skips empty fields**
‚úÖ Change greetings ‚Üí Generate ‚Üí Uses custom greetings
‚úÖ Change closings ‚Üí Generate ‚Üí Uses custom closings
‚úÖ Change tone ‚Üí Generate ‚Üí Tone reflects choice
‚úÖ Change length ‚Üí Generate ‚Üí Length matches setting
```

#### **Signature Handling** ‚≠ê NEW
```
Test Cases:
‚úÖ AI generates "Regards, Name" inline ‚Üí Name removed, signature appended
‚úÖ AI generates "Regards,\nName" separate lines ‚Üí Name replaced with full signature
‚úÖ AI generates multiple closings ‚Üí All name instances removed, one signature added
‚úÖ AI generates without name ‚Üí Signature appended normally
‚úÖ Signature format: Name\nTitle\nContact (skips empty fields)
‚úÖ Contact number validation: Only numbers, +, -, spaces, parentheses allowed
‚úÖ Dark theme styling: All inputs have consistent #2a2a2a background
```

### Edge Cases Handled

```javascript
1. No user email detected:
   ‚Üí Alert shown, requests user login verification

2. Empty intent field:
   ‚Üí Red border, placeholder changes, no generation

3. Insert before generate:
   ‚Üí Red border on input, user prompted

4. Recipient email same as user email:
   ‚Üí Validation catches, retries with explicit instructions

5. Very long email threads:
   ‚Üí Content truncated to 1000 chars per message

6. Compose field removed (tab closed):
   ‚Üí Container cleaned up, observers disconnected

7. Multiple compose boxes:
   ‚Üí Each gets unique MailBot button with unique ID

8. Gmail updates (DOM changes):
   ‚Üí MutationObserver detects, re-injects buttons

9. Concatenated multi-word names:
   ‚Üí Normalization splits them correctly

9. No Gemini Nano model:
    ‚Üí Clear error message with setup instructions

10. **AI adds name inline with closing**:
    ‚Üí Detected and removed, signature appended properly

11. **AI adds multiple closing sections**:
    ‚Üí All duplicate names removed, single signature added

12. **Empty signature fields (title/contact)**:
    ‚Üí Skipped gracefully, only non-empty fields included
```

---

## üìä Key Metrics & Achievements

### Code Statistics
```
Total Lines: 3,400+
Main Content Script: 3,400+ lines (increased with signature logic)
Languages: JavaScript (95%), HTML (3%), CSS (2%)
Files: 14
Commits: 50+ (including signature feature enhancements)
Branch: gerd (active development)
```

### Features Implemented
```
‚úÖ On-device AI integration (Gemini Nano)
‚úÖ Identity confusion prevention system
‚úÖ Name normalization algorithm
‚úÖ Drag & drop repositioning
‚úÖ Preview-before-send workflow
‚úÖ Settings persistence
‚úÖ Conversation state analysis
‚úÖ Validation & retry logic
‚úÖ Smooth fade animations
‚úÖ Dark minimalist UI design
‚úÖ Custom greetings/closings support
‚úÖ Tone adaptation (4 modes)
‚úÖ Length control (3 levels)
‚úÖ **Professional email signatures (Name + Title + Contact)**
‚úÖ **Smart duplicate name detection and removal**
‚úÖ **Inline and standalone signature format handling**
‚úÖ **Dark theme input styling (.mailbot-input class)**
‚úÖ **Contact number validation (tel input with pattern)**
```

### Innovation Highlights
```
üåü First-in-class identity confusion prevention
üåü Truly private (100% on-device AI)
üåü Context-aware follow-up detection
üåü Dynamic name normalization
üåü Persistent drag positioning with typing lock
üåü Two-stage review workflow
üåü **Intelligent signature management with duplicate detection**
üåü **Multi-field professional signatures (Title + Contact)**
üåü **Pattern-aware closing format enforcement**
```

---

## üéØ Use Cases

### Professional Scenarios

1. **Job Applications**
   - Generate personalized cover letter emails
   - Follow up on application status
   - Thank recruiters for interviews

2. **Client Communication**
   - Respond to client inquiries with appropriate tone
   - Send project updates professionally
   - Request additional information politely

3. **Team Collaboration**
   - Follow up on pending tasks
   - Share project updates with team
   - Request feedback on deliverables

4. **Networking**
   - Introduce yourself to industry contacts
   - Thank people for connections/introductions
   - Request informational interviews

### Academic Scenarios

1. **Professor Communication**
   - Request extensions formally
   - Ask questions about assignments
   - Schedule office hours

2. **Group Projects**
   - Coordinate with team members
   - Share progress updates
   - Resolve conflicts diplomatically

3. **Research Inquiries**
   - Contact researchers for collaboration
   - Request access to resources
   - Follow up on unanswered queries

### Personal Scenarios

1. **Event Planning**
   - Send invitations with appropriate tone
   - Follow up with attendees
   - Thank hosts/organizers

2. **Complaint Handling**
   - Write formal complaints professionally
   - Request refunds or corrections
   - Escalate issues appropriately

---

## üîÆ Future Enhancements (Roadmap)

### Short-Term (Next Release)
```
üî≤ Keyboard shortcuts (Ctrl+Shift+M to open MailBot)
üî≤ Multiple tone presets saved per contact
üî≤ Template system for common email types
üî≤ Undo/Redo for preview edits
üî≤ Export/Import settings
üî≤ Dark/Light theme toggle
üî≤ Signature preview in settings popup
üî≤ Rich text signature formatting (bold, links)
```

### Medium-Term
```
üî≤ Multi-language support (Spanish, French, etc.)
üî≤ Smart suggestions based on email history
üî≤ Integration with Gmail's "Smart Compose"
üî≤ Scheduling/delay send integration
üî≤ Email categorization (formal, casual, urgent)
üî≤ Attachment reminder detection
```

### Long-Term
```
üî≤ Support for other email providers (Outlook, Yahoo)
üî≤ Mobile app version
üî≤ Team/Organization settings sync
üî≤ Analytics dashboard (emails sent, time saved)
üî≤ Custom AI model fine-tuning
üî≤ Voice input for intent description
```

---

## ü§ù Contributing

### Development Setup
```bash
1. Fork repository on GitHub
2. Clone your fork: git clone https://github.com/YOUR_USERNAME/Mail-Bot.git
3. Create feature branch: git checkout -b feature/your-feature-name
4. Make changes and test thoroughly
5. Commit: git commit -m "Add: Description of feature"
6. Push: git push origin feature/your-feature-name
7. Create Pull Request on GitHub
```

### Code Style Guidelines
```javascript
- Use ES6+ features (const, let, arrow functions)
- Inline styles for extension compatibility
- Comments for complex logic
- Console logs with [MailBot] prefix
- Descriptive variable/function names
- 2-space indentation
```

### Testing Checklist
```
Before submitting PR:
‚úÖ Test on fresh Gmail account
‚úÖ Test with multiple compose boxes
‚úÖ Verify identity confusion prevention
‚úÖ Test drag & drop functionality
‚úÖ Verify settings persistence
‚úÖ Check console for errors
‚úÖ Test all edge cases
‚úÖ Update documentation if needed
```

---

## üìû Support & Contact

### Documentation
- **README**: User-facing guide
- **This Document**: Technical specification
- **changes.md**: Development changelog

### Issues & Bug Reports
GitHub Issues: https://github.com/gerdguerrero/Mail-Bot/issues

**Template**:
```
Title: [BUG] Brief description
Environment:
- Chrome Version: 
- OS:
- Extension Version:

Steps to Reproduce:
1. 
2. 
3. 

Expected Behavior:

Actual Behavior:

Screenshots (if applicable):
```

### Feature Requests
GitHub Issues with label `enhancement`

**Template**:
```
Title: [FEATURE] Brief description
Problem:
Proposed Solution:
Use Case:
Priority: Low/Medium/High
```

---

## üìú License & Attribution

### License
MIT License - See [LICENSE](LICENSE) file

Copyright (c) 2025 Joseph Miguel Guerrero (gerdguerrero)

### Third-Party Technologies
- **Google Gemini Nano**: Google's on-device AI model
- **Chrome Extensions API**: Google Chrome browser platform
- **Gmail**: Google's email service

### Acknowledgments
```
Inspiration:
- Google's Prompt API documentation
- Modern SaaS UI/UX principles
- Privacy-first AI movement

Special Thanks:
- Chrome team for Gemini Nano integration
- Open-source community for best practices
```

---

## üéâ Project Success Criteria

### MVP Goals (‚úÖ Achieved)
```
‚úÖ Fully functional AI email generation
‚úÖ Gmail integration (compose, reply, follow-up)
‚úÖ User preferences system
‚úÖ Preview workflow
‚úÖ Identity confusion prevention
‚úÖ Dark minimalist UI
‚úÖ On-device processing (privacy)
‚úÖ Drag & reposition
‚úÖ Smooth animations
‚úÖ Name normalization
‚úÖ Comprehensive documentation
‚úÖ **Professional email signatures with title and contact**
‚úÖ **Smart duplicate detection and removal**
‚úÖ **Dark theme styling across all inputs**
```

### Quality Metrics (‚úÖ Met)
```
‚úÖ Zero external dependencies
‚úÖ No network requests (100% offline)
‚úÖ Minimal permissions (3 only)
‚úÖ Clean, maintainable code
‚úÖ Comprehensive error handling
‚úÖ User-friendly error messages
‚úÖ Consistent design language
‚úÖ MIT licensed for open-source
```

### User Experience Goals (‚úÖ Achieved)
```
‚úÖ Intuitive interface (no learning curve)
‚úÖ Fast generation (< 3 seconds typical)
‚úÖ Non-intrusive UI (doesn't block Gmail)
‚úÖ Smooth animations (< 200ms)
‚úÖ Reliable identity handling (no confusion)
‚úÖ Flexible positioning (drag anywhere)
‚úÖ Preview-before-send safety
‚úÖ Customizable preferences
```

---

## üìà Conclusion

**MailBot** represents a significant achievement in privacy-preserving AI assistants for productivity. By leveraging Chrome's built-in Gemini Nano model, it provides powerful email generation capabilities without compromising user privacy‚Äîa critical differentiator in today's data-conscious world.

The project successfully demonstrates:
- **Technical Innovation**: Identity confusion prevention, name normalization, context-aware generation, intelligent signature management
- **User-Centric Design**: Preview workflow, drag & drop, smooth animations, dark aesthetic, professional signatures
- **Privacy Excellence**: 100% on-device processing, zero data collection
- **Production Quality**: Comprehensive error handling, validation, edge case management, duplicate detection

**Recent Enhancements (v0.2.0)**:
- ‚ú® Professional email signatures with job title and contact number
- ‚ú® Smart duplicate name detection (handles inline and standalone formats)
- ‚ú® AI prompt optimization for proper closing format
- ‚ú® Dark theme styling consistency across all input fields
- ‚ú® Contact number validation with proper input type

This document serves as both a technical specification and a showcase of the project's depth, making it ideal for presentations, portfolio demonstrations, and technical discussions.

---

**Built with ‚ù§Ô∏è by Joseph Miguel Guerrero**  
**For questions or collaboration: https://github.com/vibecodersph/Mail-Bot**

---

*Last Updated: October 22, 2025*  
*Document Version: 2.0*  
*Project Version: 0.2.0*
